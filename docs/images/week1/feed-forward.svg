<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <!-- Blurry gradient for "mixed but not understood" -->
    <linearGradient id="blurryMix" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:0.4"/>
      <stop offset="33%" style="stop-color:#10b981;stop-opacity:0.4"/>
      <stop offset="66%" style="stop-color:#f59e0b;stop-opacity:0.4"/>
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:0.4"/>
    </linearGradient>
    <!-- Sharp gradient for "understood" -->
    <linearGradient id="sharpResult" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1"/>
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1"/>
    </linearGradient>
    <!-- FFN expansion gradient -->
    <linearGradient id="ffnExpand" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:0.2"/>
      <stop offset="100%" style="stop-color:#f97316;stop-opacity:0.1"/>
    </linearGradient>
    <filter id="blur" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="600" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" font-family="system-ui, sans-serif" font-size="22" font-weight="bold" fill="#1e293b">Feed-Forward Network: From Gathered to Understood</text>
  <text x="450" y="58" text-anchor="middle" font-family="system-ui, sans-serif" font-size="13" fill="#64748b">"Attention mixes. FFN thinks."</text>

  <!-- Left Panel: After Attention (Blurry) -->
  <rect x="30" y="80" width="260" height="320" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
  <rect x="30" y="80" width="260" height="32" rx="8" fill="#64748b"/>
  <text x="160" y="102" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white">AFTER ATTENTION</text>

  <!-- Blurry token representation -->
  <rect x="80" y="130" width="160" height="80" rx="8" fill="url(#blurryMix)" filter="url(#blur)" stroke="#94a3b8" stroke-width="1"/>
  <text x="160" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" fill="#475569" opacity="0.7">"sat"</text>

  <!-- Blend explanation -->
  <text x="160" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#64748b">Weighted blend:</text>
  <rect x="60" y="248" width="60" height="22" rx="3" fill="#dbeafe"/>
  <text x="90" y="263" text-anchor="middle" font-family="monospace" font-size="10" fill="#1e40af">29% The</text>
  <rect x="130" y="248" width="60" height="22" rx="3" fill="#d1fae5"/>
  <text x="160" y="263" text-anchor="middle" font-family="monospace" font-size="10" fill="#047857">32% cat</text>
  <rect x="200" y="248" width="60" height="22" rx="3" fill="#fef3c7"/>
  <text x="230" y="263" text-anchor="middle" font-family="monospace" font-size="10" fill="#b45309">39% sat</text>

  <!-- Problem statement -->
  <rect x="50" y="290" width="220" height="55" rx="4" fill="#fef2f2" stroke="#fecaca" stroke-width="1"/>
  <text x="160" y="310" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#dc2626">Problem:</text>
  <text x="160" y="326" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#991b1b">Just a weighted average</text>
  <text x="160" y="340" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#991b1b">No computation happened</text>

  <text x="160" y="380" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#94a3b8">Gathered ≠ Understood</text>

  <!-- Middle: FFN Processing -->
  <rect x="320" y="80" width="260" height="320" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
  <rect x="320" y="80" width="260" height="32" rx="8" fill="#f97316"/>
  <text x="450" y="102" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white">FFN PROCESSING</text>

  <!-- Expand -->
  <text x="450" y="135" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155">1. Expand (4×)</text>
  <rect x="380" y="145" width="140" height="40" rx="4" fill="url(#ffnExpand)" stroke="#f97316" stroke-width="2"/>
  <text x="450" y="163" text-anchor="middle" font-family="monospace" font-size="10" fill="#c2410c">768 → 3072</text>
  <text x="450" y="178" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">"More room to think"</text>

  <!-- Non-linearity -->
  <text x="450" y="210" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155">2. Non-linearity (GELU)</text>
  <rect x="350" y="220" width="200" height="55" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <!-- GELU curve sketch -->
  <path d="M 370 255 Q 400 255 420 245 Q 450 230 480 235 Q 510 240 530 235" fill="none" stroke="#b45309" stroke-width="2"/>
  <text x="450" y="268" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#92400e">Non-linear = can compute patterns</text>

  <!-- Contract -->
  <text x="450" y="300" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155">3. Contract (÷4)</text>
  <rect x="380" y="310" width="140" height="40" rx="4" fill="url(#ffnExpand)" stroke="#f97316" stroke-width="2"/>
  <text x="450" y="328" text-anchor="middle" font-family="monospace" font-size="10" fill="#c2410c">3072 → 768</text>
  <text x="450" y="343" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">"Compress insight"</text>

  <!-- Formula -->
  <rect x="340" y="360" width="220" height="30" rx="4" fill="#f1f5f9"/>
  <text x="450" y="380" text-anchor="middle" font-family="monospace" font-size="11" fill="#475569">FFN(x) = W₂ · GELU(W₁ · x)</text>

  <!-- Right Panel: After FFN (Sharp) -->
  <rect x="610" y="80" width="260" height="320" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
  <rect x="610" y="80" width="260" height="32" rx="8" fill="#7c3aed"/>
  <text x="740" y="102" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white">AFTER FFN</text>

  <!-- Sharp token representation -->
  <rect x="660" y="130" width="160" height="80" rx="8" fill="url(#sharpResult)" stroke="#7c3aed" stroke-width="2"/>
  <text x="740" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">"sat"</text>

  <!-- What it now knows -->
  <text x="740" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#64748b">Now encodes:</text>
  <rect x="640" y="248" width="200" height="65" rx="4" fill="#f5f3ff" stroke="#c4b5fd" stroke-width="1"/>
  <text x="740" y="268" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6d28d9">• "sat" is a past-tense verb</text>
  <text x="740" y="284" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6d28d9">• subject was "cat"</text>
  <text x="740" y="300" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#6d28d9">• likely needs location next</text>

  <!-- Success statement -->
  <rect x="630" y="325" width="220" height="40" rx="4" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
  <text x="740" y="345" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#16a34a">Computed, not just mixed</text>
  <text x="740" y="360" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#166534">Ready for next layer</text>

  <text x="740" y="390" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#7c3aed" font-weight="500">Gathered → Understood ✓</text>

  <!-- Arrows -->
  <path d="M 295 240 L 315 240" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M 585 240 L 605 240" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Arrow marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Bottom: Key Insight Panel -->
  <rect x="30" y="420" width="840" height="160" rx="8" fill="white" stroke="#e2e8f0" stroke-width="2"/>
  <rect x="30" y="420" width="840" height="32" rx="8" fill="#1e293b"/>
  <text x="450" y="442" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="white">WHY FFN MATTERS</text>

  <!-- Three columns -->
  <!-- ELI5 -->
  <rect x="50" y="465" width="250" height="100" rx="6" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
  <text x="175" y="488" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#0369a1">ELI5</text>
  <text x="175" y="510" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#334155">Attention = ask friends for notes</text>
  <text x="175" y="528" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#334155">FFN = read and understand them</text>
  <text x="175" y="550" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">You can't learn by just collecting</text>

  <!-- Parameters -->
  <rect x="325" y="465" width="250" height="100" rx="6" fill="#fef3c7" stroke="#fcd34d" stroke-width="1"/>
  <text x="450" y="488" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#b45309">WHERE PARAMS LIVE</text>
  <text x="450" y="512" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" font-weight="bold" fill="#92400e">⅔</text>
  <text x="450" y="532" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#334155">of transformer params in FFN</text>
  <text x="450" y="550" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">W₁ and W₂ are huge matrices</text>

  <!-- For Fine-tuning -->
  <rect x="600" y="465" width="250" height="100" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1"/>
  <text x="725" y="488" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#16a34a">FOR FINE-TUNING</text>
  <text x="725" y="510" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#334155">LoRA often targets FFN</text>
  <text x="725" y="528" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#334155">Biggest bang for your buck</text>
  <text x="725" y="550" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Adapt "thinking" not "gathering"</text>
</svg>
